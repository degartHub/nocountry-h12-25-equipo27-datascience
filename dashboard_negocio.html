
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlightOnTime - Dashboard de Negocio</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f0f4f8; color: #333; margin: 0; padding: 20px; }
        .container { max-width: 1200px; margin: auto; background: white; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); overflow: hidden; }
        header { background: linear-gradient(135deg, #003366, #0066cc); color: white; padding: 40px; text-align: center; }
        h1 { margin: 0; font-size: 2.5em; }
        h2 { color: #003366; border-bottom: 3px solid #0066cc; padding-bottom: 10px; }
        .section { padding: 30px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .card { background: #f8fbff; border-left: 5px solid #0066cc; padding: 20px; border-radius: 8px; }
        .metric { font-size: 2em; font-weight: bold; color: #003366; margin: 10px 0; }
        .input-group { margin: 15px 0; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        select, input, button { width: 100%; padding: 12px; border-radius: 6px; border: 1px solid #ccc; font-size: 1em; }
        button { background: #0066cc; color: white; border: none; cursor: pointer; font-weight: bold; margin-top: 20px; }
        button:hover { background: #003366; }
        .result { margin-top: 20px; padding: 20px; border-radius: 8px; font-size: 1.2em; text-align: center; }
        .retrasado { background: #ffeeee; border: 2px solid #cc0000; color: #cc0000; }
        .puntual { background: #eeffee; border: 2px solid #00aa00; color: #00aa00; }
        .error { background: #ffeecc; border: 2px solid #cc6600; color: #cc6600; padding: 10px; margin-top: 10px; }
        .explanation { font-size: 0.9em; color: #666; margin-top: 20px; line-height: 1.5; }
        footer { text-align: center; padding: 20px; background: #003366; color: white; font-size: 0.9em; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üöÄ Dashboard de Negocio - FlightOnTime</h1>
            <p>Impacto Econ√≥mico del Modelo Predictivo de Retrasos</p>
        </header>

        <div class="section">
            <h2>üí∞ Ahorro Estimado</h2>
            <p>Basado en detecci√≥n correcta de retrasos (True Positives) con mitigaci√≥n del 20% y costo de $75/min.</p>
            <div class="grid">
                <div class="card">
                    <div class="metric">$5,400,000 USD</div>
                    <p>Ahorro estimado total (escala test set ~100k vuelos)</p>
                </div>
                <div class="card">
                    <div class="metric">15,000</div>
                    <p>Vuelos retrasados detectados correctamente</p>
                </div>
                <div class="card">
                    <div class="metric">90,000 min</div>
                    <p>Minutos de retraso mitigados</p>
                </div>
            </div>
            <p class="explanation">
                <strong>C√≥mo se calculan los ahorros:</strong> Asumimos un costo promedio de $75 por minuto de retraso (incluye combustible extra, compensaciones a pasajeros, costos log√≠sticos). Para cada vuelo retrasado detectado correctamente (True Positive), se mitiga el 20% de los minutos de retraso promedio (30 min) mediante alertas tempranas y reajustes operativos. Ahorro por vuelo = 30 min * 0.20 * $75 = $450. Ahorro total = n√∫mero de TP * $450. Estos valores son ajustables en el modelo real para datos espec√≠ficos de la aerol√≠nea.
            </p>
        </div>

        <div class="section">
            <h2>üîÆ Predicci√≥n en Tiempo Real (simulaci√≥n /predict)</h2>
            <p>Ingresa datos del vuelo para simular la respuesta del endpoint POST /predict</p>
            <div class="grid">
                <div>
                    <div class="input-group">
                        <label>Aerol√≠nea</label>
                        <select id="aerolinea">
                            <option value="9E">9E - Endeavor Air Inc.</option>
                            <option value="AA">AA - American Airlines Inc.</option>
                            <option value="AS">AS - Alaska Airlines Inc.</option>
                            <option value="B6">B6 - JetBlue Airways</option>
                            <option value="DL">DL - Delta Air Lines Inc.</option>
                            <option value="F9">F9 - Frontier Airlines Inc.</option>
                            <option value="G4">G4 - Allegiant Air</option>
                            <option value="HA">HA - Hawaiian Airlines Inc.</option>
                            <option value="MQ">MQ - Envoy Air</option>
                            <option value="NK">NK - Spirit Air Lines</option>
                            <option value="OH">OH - PSA Airlines Inc.</option>
                            <option value="OO">OO - SkyWest Airlines Inc.</option>
                            <option value="UA">UA - United Air Lines Inc.</option>
                            <option value="WN">WN - Southwest Airlines Co.</option>
                            <option value="YV">YV - Mesa Airlines Inc.</option>
                            <option value="YX">YX - Republic Airline</option>
                            <!-- Agrega m√°s aerol√≠neas del dataset si es necesario -->
                        </select>
                    </div>
                    <div class="input-group">
                        <label>Origen (IATA)</label>
                        <select id="origen">
                            <option value="ABE">ABE - Allentown</option>
                            <option value="ABY">ABY - Albany, GA</option>
                            <option value="AEX">AEX - Alexandria, LA</option>
                            <option value="AGS">AGS - Augusta, GA</option>
                            <option value="ALB">ALB - Albany, NY</option>
                            <option value="ATL">ATL - Atlanta</option>
                            <option value="AUS">AUS - Austin</option>
                            <option value="AVL">AVL - Asheville</option>
                            <option value="AZO">AZO - Kalamazoo</option>
                            <option value="BGR">BGR - Bangor</option>
                            <option value="BHM">BHM - Birmingham</option>
                            <option value="BIS">BIS - Bismarck</option>
                            <option value="BMI">BMI - Bloomington</option>
                            <option value="BNA">BNA - Nashville</option>
                            <option value="BQK">BQK - Brunswick</option>
                            <option value="BTR">BTR - Baton Rouge</option>
                            <option value="BTV">BTV - Burlington</option>
                            <option value="BUF">BUF - Buffalo</option>
                            <option value="BWI">BWI - Baltimore</option>
                            <option value="CAE">CAE - Columbia</option>
                            <option value="CHA">CHA - Chattanooga</option>
                            <option value="CHO">CHO - Charlottesville</option>
                            <!-- Agrega m√°s aeropuertos del dataset si es necesario -->
                        </select>
                    </div>
                </div>
                <div>
                    <div class="input-group">
                        <label>Destino (IATA)</label>
                        <select id="destino">
                            <option value="ABE">ABE - Allentown</option>
                            <option value="ABY">ABY - Albany, GA</option>
                            <option value="AEX">AEX - Alexandria, LA</option>
                            <option value="AGS">AGS - Augusta, GA</option>
                            <option value="ALB">ALB - Albany, NY</option>
                            <option value="ATL">ATL - Atlanta</option>
                            <option value="AUS">AUS - Austin</option>
                            <option value="AVL">AVL - Asheville</option>
                            <option value="AZO">AZO - Kalamazoo</option>
                            <option value="BGR">BGR - Bangor</option>
                            <option value="BHM">BHM - Birmingham</option>
                            <option value="BIS">BIS - Bismarck</option>
                            <option value="BMI">BMI - Bloomington</option>
                            <option value="BNA">BNA - Nashville</option>
                            <option value="BQK">BQK - Brunswick</option>
                            <option value="BTR">BTR - Baton Rouge</option>
                            <option value="BTV">BTV - Burlington</option>
                            <option value="BUF">BUF - Buffalo</option>
                            <option value="BWI">BWI - Baltimore</option>
                            <option value="CAE">CAE - Columbia</option>
                            <option value="CHA">CHA - Chattanooga</option>
                            <option value="CHO">CHO - Charlottesville</option>
                            <!-- Agrega m√°s aeropuertos del dataset si es necesario -->
                        </select>
                    </div>
                    <div class="input-group">
                        <label>Fecha y hora de partida (ISO)</label>
                        <input type="text" id="fecha" value="2025-11-10T14:30:00">
                    </div>
                    <div class="input-group">
                        <label>Distancia (km, calculada autom√°ticamente)</label>
                        <input type="text" id="distancia" readonly>
                    </div>
                </div>
            </div>
            <button onclick="predecir()">Predecir Retraso</button>
            <div id="resultado"></div>
            <p class="explanation">
                <strong>Rol de la fecha y hora en el c√°lculo:</strong> La fecha se usa para calcular el d√≠a de la semana (ej: fines de semana tienen menos riesgo de retraso por menor tr√°fico). La hora se usa para identificar picos (ej: tardes/noches >17h o madrugadas <8h aumentan riesgo por congesti√≥n o clima). Esto simula features del modelo real (dia_semana, Time en minutos).
            </p>
        </div>

        <footer>
            MVP NoCountry H12-25-Equipo27 | Dashboard HTML Est√°tico | 2026
            <p class="explanation">
                <strong>De d√≥nde obtiene los datos y c√≥mo calcula la predicci√≥n:</strong> Esta simulaci√≥n usa datos hist√≥ricos agregados del dataset "Airline_Delay_Cause.csv" (US DOT, 2024-2025), con aerol√≠neas y aeropuertos reales. La predicci√≥n se calcula con l√≥gica basada en el modelo RandomForest: riesgo inicial 30%, +20% si distancia >3000km (vuelos largos m√°s propensos), +15% si hora pico, +15% si aeropuerto congestionado (ej: ATL, ORD). Probabilidad >50% = "Retrasado". En el modelo real (Python/scikit-learn), se usa machine learning para aprender patrones de retrasos, pero esta versi√≥n HTML es una aproximaci√≥n para demo. Ahorro por vuelo = minutos promedio (30) * mitigaci√≥n (20%) * costo ($75/min) = $450 si retrasado.
            </p>
        </footer>
    </div>

    <script>
        const aeropuertos = {
            "ABE": {lat: 40.652, lon: -75.440},
            "ABY": {lat: 31.535, lon: -84.194},
            "AEX": {lat: 31.327, lon: -92.548},
            "AGS": {lat: 33.370, lon: -81.964},
            "ALB": {lat: 42.748, lon: -73.802},
            "ATL": {lat: 33.636, lon: -84.428},
            "AUS": {lat: 30.194, lon: -97.670},
            "AVL": {lat: 35.436, lon: -82.541},
            "AZO": {lat: 42.235, lon: -85.552},
            "BGR": {lat: 44.807, lon: -68.828},
            "BHM": {lat: 33.563, lon: -86.753},
            "BIS": {lat: 46.772, lon: -100.746},
            "BMI": {lat: 40.477, lon: -88.915},
            "BNA": {lat: 36.124, lon: -86.678},
            "BQK": {lat: 31.259, lon: -81.466},
            "BTR": {lat: 30.533, lon: -91.149},
            "BTV": {lat: 44.472, lon: -73.153},
            "BUF": {lat: 42.940, lon: -78.732},
            "BWI": {lat: 39.175, lon: -76.668},
            "CAE": {lat: 33.939, lon: -81.119},
            "CHA": {lat: 35.035, lon: -85.204},
            "CHO": {lat: 38.139, lon: -78.453},
            // Agrega m√°s aeropuertos del dataset si es necesario
        };

        function calcularDistancia(lat1, lon1, lat2, lon2) {
            const R = 6371; // Radio Tierra (km)
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                      Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                      Math.sin(dLon/2) * Math.sin(dLon/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
        }

        function predecir() {
            const aerolinea = document.getElementById('aerolinea').value;
            const origen = document.getElementById('origen').value;
            const destino = document.getElementById('destino').value;
            const fecha = document.getElementById('fecha').value;
            const distancia_div = document.getElementById('distancia');

            if (origen === destino) {
                document.getElementById('resultado').innerHTML = `<div class="error">Error: Origen y destino no pueden ser el mismo aeropuerto.</div>`;
                return;
            }

            const orig_coords = aeropuertos[origen];
            const dest_coords = aeropuertos[destino];
            if (!orig_coords || !dest_coords) {
                document.getElementById('resultado').innerHTML = `<div class="error">Error: Aeropuerto no encontrado en la base de datos.</div>`;
                return;
            }

            const distancia = calcularDistancia(orig_coords.lat, orig_coords.lon, dest_coords.lat, dest_coords.lon).toFixed(0);
            distancia_div.value = distancia;

            const hora = new Date(fecha).getHours();
            const dia_semana = new Date(fecha).getDay() + 1; // 1 = Lunes

            let riesgo = 0.3;
            if (distancia > 3000) riesgo += 0.2;
            if (hora >= 17 || hora <= 8) riesgo += 0.15;
            if (['ORD', 'ATL', 'DFW', 'DEN'].includes(origen) || ['ORD', 'ATL', 'DFW', 'DEN'].includes(destino)) riesgo += 0.15;
            if (dia_semana === 6 || dia_semana === 7) riesgo -= 0.1; // Menos riesgo en fines de semana

            const probabilidad = Math.min(riesgo, 0.95);
            const prevision = probabilidad > 0.5 ? "Retrasado" : "Puntual";
            const clase = prevision === "Retrasado" ? "retrasado" : "puntual";

            document.getElementById('resultado').innerHTML = `
                <div class="result ${clase}">
                    <strong>Previsi√≥n:</strong> ${prevision}<br>
                    <strong>Probabilidad de retraso:</strong> ${(probabilidad*100).toFixed(1)}%<br><br>
                    ${prevision === "Retrasado" ? "<strong>Ahorro posible por vuelo (mitigaci√≥n 20%):</strong> $4,500 USD" : "Vuelo previsto puntual ‚Üí Operaci√≥n normal"}
                </div>
            `;
        }
    </script>
</body>
</html>
